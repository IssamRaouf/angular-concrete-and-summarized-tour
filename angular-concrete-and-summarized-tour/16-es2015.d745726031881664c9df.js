(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"E/Qa":function(t,e,i){"use strict";i.r(e),i.d(e,"HttpExampleModule",function(){return q});var s=i("ofXK"),n=i("3Pt+"),c=i("smnK"),o=i("tyNb"),r=i("fXoL"),d=i("tk/3");class a{constructor(t){null!=t&&(t.hasOwnProperty("userId")&&(this.userId=t.userId),t.hasOwnProperty("id")&&(this.id=t.id),t.hasOwnProperty("title")&&(this.title=t.title),t.hasOwnProperty("completed")&&(this.completed=t.completed))}}var l=i("lJxs");class u{constructor(t){null!=t&&(t.hasOwnProperty("name")&&(this.name=t.name),t.hasOwnProperty("catchPhrase")&&(this.catchPhrase=t.catchPhrase),t.hasOwnProperty("bs")&&(this.bs=t.bs))}}class b{constructor(t){null!=t&&(t.hasOwnProperty("id")&&(this.id=t.id),t.hasOwnProperty("name")&&(this.name=t.name),t.hasOwnProperty("username")&&(this.username=t.username),t.hasOwnProperty("email")&&(this.email=t.email),t.hasOwnProperty("company")&&(this.company=new u(t.company)))}}let h=(()=>{class t{constructor(t){this.httpClient=t,this.webServiceUrl="https://jsonplaceholder.typicode.com"}get headers(){const t=new d.c;return t.append("Content-type","application/json; charset=UTF-8"),t}getListTodo(){return this.httpClient.get(this.webServiceUrl+"/todos",{headers:this.headers,responseType:"json",observe:"response"}).pipe(Object(l.a)(t=>t.body.map(t=>new a(t))))}getListUsers(){return this.httpClient.get(this.webServiceUrl+"/users",{headers:this.headers,responseType:"json",observe:"response"}).pipe(Object(l.a)(t=>t.body.map(t=>new b(t))))}addTodo(t){return this.httpClient.post(this.webServiceUrl+"/todos",JSON.stringify(t),{headers:this.headers,responseType:"json",observe:"response"}).pipe(Object(l.a)(t=>new a(t.body)))}deleteTodo(t){return this.httpClient.delete(this.webServiceUrl+"/todos/"+t.id,{headers:this.headers,responseType:"json",observe:"body"})}putTodo(t){return this.httpClient.put(this.webServiceUrl+"/todos/"+t.id,JSON.stringify(t),{headers:this.headers,responseType:"json",observe:"response"}).pipe(Object(l.a)(t=>new a(t.body)))}}return t.\u0275fac=function(e){return new(e||t)(r.Tb(d.a))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();var p=i("kmnG"),m=i("d3UM"),k=i("qFsG"),f=i("bSwM"),T=i("bTqV"),O=i("FKr1");function g(t,e){if(1&t&&(r.Pb(0,"mat-option",8),r.Ac(1),r.Ob()),2&t){const t=e.$implicit;r.hc("value",t.id),r.zb(1),r.Bc(t.username)}}function y(t,e){1&t&&(r.Pb(0,"mat-error"),r.Ac(1,"Champ obligatoire"),r.Ob())}function P(t,e){1&t&&(r.Pb(0,"mat-hint"),r.Ac(1,"required"),r.Ob())}function v(t,e){1&t&&(r.Pb(0,"mat-error"),r.Ac(1,"Champ obligatoire"),r.Ob())}function w(t,e){1&t&&(r.Pb(0,"mat-hint"),r.Ac(1,"required"),r.Ob())}let L=(()=>{class t{constructor(t){this.todoRestServ=t,this.usersList=[],this.sendTicket=new r.n,this.sendEditedTicket=new r.n}ngOnInit(){}ngOnChanges(){this.editTicket?this.isAdd=!1:(this.isAdd=!0,this.editTicket=new a({id:null,title:null,userId:null,completed:!1})),this.createAndInitForm()}createAndInitForm(){this.formTicket=new n.f({userId:new n.c(this.editTicket.userId,n.u.required),title:new n.c(this.editTicket.title,n.u.required),completed:new n.c(this.editTicket.completed),id:new n.c(this.editTicket.id)})}get titleOperation(){return this.isAdd?"Ajouter ticket":"Modifier Ticket"}onSubmit(){if(this.markFormAsTouched(this.formTicket),this.formTicket.valid){const t=new a(this.formTicket.value);this.isAdd?this.addTodo(t):this.editTodo(t)}}onClean(){this.isAdd=!0,this.editTicket=Object.assign(new a({id:null,title:null,userId:null,completed:!1})),this.createAndInitForm()}isRequired(t){return t.errors&&void 0!==t.errors.required}get controls(){return this.formTicket.controls?this.formTicket.controls:null}markFormAsTouched(t){Object.values(t.controls).forEach(t=>{t.controls?t.controls.forEach(t=>this.markFormAsTouched(t)):t.markAsTouched()})}addTodo(t){this.todoRestServ.addTodo(t).subscribe(e=>{e&&(t.id=e.id,this.sendTicket.emit(t))})}editTodo(t){this.todoRestServ.putTodo(t).subscribe(e=>{e&&(t.id=e.id,this.sendEditedTicket.emit(t))})}enumToSelectList(t){return Object.keys(t).map(e=>({val:t[e],text:t[e]}))}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(h))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-todo-form"]],inputs:{usersList:"usersList",editTicket:"editTicket"},outputs:{sendTicket:"sendTicket",sendEditedTicket:"sendEditedTicket"},features:[r.xb],decls:19,vars:9,consts:[[1,"container","container-todo-form"],["novalidate","",1,"form-container",3,"formGroup"],["placeholder","User","formControlName","userId"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","placeholder","Le nom de ticket","formControlName","title"],["formControlName","completed",3,"indeterminate","labelPosition"],["mat-raised-button","","color","primary",3,"click"],[3,"value"]],template:function(t,e){1&t&&(r.Pb(0,"div",0),r.Pb(1,"h2"),r.Ac(2),r.Ob(),r.Pb(3,"form",1),r.Pb(4,"mat-form-field"),r.Pb(5,"mat-select",2),r.yc(6,g,2,2,"mat-option",3),r.Ob(),r.yc(7,y,2,0,"mat-error",4),r.yc(8,P,2,0,"mat-hint",4),r.Ob(),r.Pb(9,"mat-form-field"),r.Lb(10,"input",5),r.yc(11,v,2,0,"mat-error",4),r.yc(12,w,2,0,"mat-hint",4),r.Ob(),r.Pb(13,"mat-checkbox",6),r.Ac(14," Termin\xe9 "),r.Ob(),r.Pb(15,"button",7),r.Wb("click",function(){return e.onClean()}),r.Ac(16,"Clean"),r.Ob(),r.Pb(17,"button",7),r.Wb("click",function(){return e.onSubmit()}),r.Ac(18,"Envoyer"),r.Ob(),r.Ob(),r.Ob()),2&t&&(r.zb(2),r.Bc(e.titleOperation),r.zb(1),r.hc("formGroup",e.formTicket),r.zb(3),r.hc("ngForOf",e.usersList),r.zb(1),r.hc("ngIf",e.controls.userId.hasError("required")),r.zb(1),r.hc("ngIf",e.isRequired(e.controls.userId)),r.zb(3),r.hc("ngIf",e.controls.title.hasError("required")),r.zb(1),r.hc("ngIf",e.isRequired(e.controls.title)),r.zb(1),r.hc("indeterminate","true")("labelPosition","after"))},directives:[n.v,n.n,n.g,p.c,m.a,n.m,n.e,s.r,s.s,k.a,n.b,f.a,T.a,O.j,p.b,p.f],styles:["div.container-todo-form[_ngcontent-%COMP%]{background:#fff;margin:10px 0}div.container-todo-form[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:10px}div.container-todo-form[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%;margin-bottom:5px}"]}),t})();var S=i("Wp6s");let I=(()=>{class t{constructor(){this.deleteTicketSend=new r.n,this.editTicketSend=new r.n}ngOnInit(){}deleteTicket(t){this.deleteTicketSend.emit(t)}editTicket(t){this.editTicketSend.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-ticket"]],inputs:{ticket:"ticket",user:"user"},outputs:{deleteTicketSend:"deleteTicketSend",editTicketSend:"editTicketSend"},decls:17,vars:6,consts:[["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"]],template:function(t,e){1&t&&(r.Pb(0,"mat-card"),r.Pb(1,"mat-card-header"),r.Pb(2,"mat-card-title"),r.Ac(3),r.bc(4,"titlecase"),r.Ob(),r.Pb(5,"mat-card-subtitle"),r.Ac(6),r.Ob(),r.Ob(),r.Pb(7,"mat-card-content"),r.Pb(8,"p"),r.Ac(9),r.Ob(),r.Pb(10,"p"),r.Ac(11),r.Ob(),r.Ob(),r.Pb(12,"mat-card-actions"),r.Pb(13,"button",0),r.Wb("click",function(){return e.editTicket(e.ticket)}),r.Ac(14,"Edit"),r.Ob(),r.Pb(15,"button",1),r.Wb("click",function(){return e.deleteTicket(e.ticket)}),r.Ac(16,"Delete"),r.Ob(),r.Ob(),r.Ob()),2&t&&(r.zb(3),r.Bc(r.cc(4,4,e.ticket.title)),r.zb(3),r.Cc("Ticket id : ",e.ticket.id,""),r.zb(3),r.Cc("User : ",e.user.username,""),r.zb(2),r.Cc("Compnay : ",e.user.company.name,""))},directives:[S.a,S.d,S.g,S.f,S.c,S.b,T.a],pipes:[s.A],styles:[".mat-card[_ngcontent-%COMP%]{height:260px}"]}),t})();function A(t,e){1&t&&(r.Pb(0,"div",4),r.Ac(1," aucune Ticket n'existe, pouvez-vous l'ajouter !"),r.Ob())}function C(t,e){1&t&&r.yc(0,A,2,0,"ng-template")}function E(t,e){if(1&t){const t=r.Qb();r.Pb(0,"div",7),r.Pb(1,"app-ticket",8),r.Wb("deleteTicketSend",function(e){return r.pc(t),r.ac(2).onDeleteTicket(e)})("editTicketSend",function(e){return r.pc(t),r.ac(2).onEditTicket(e)}),r.Ob(),r.Ob()}if(2&t){const t=e.$implicit,i=r.ac(2);r.zb(1),r.hc("ticket",t)("user",i.getUserById(t.userId))}}function M(t,e){if(1&t&&(r.Pb(0,"p",5),r.Ac(1),r.Ob(),r.yc(2,E,2,2,"div",6)),2&t){const t=r.ac();r.zb(1),r.Cc("Nombre des tickets est : ",t.ticketList.length,""),r.zb(1),r.hc("ngForOf",t.ticketList)}}let z=(()=>{class t{constructor(t){this.todoRestServ=t,this.usersList=[],this.editTicketSend=new r.n}ngOnInit(){}getUserById(t){return this.usersList.find(e=>e.id===t)}onDeleteTicket(t){this.todoRestServ.deleteTodo(t).subscribe(e=>{const i=this.ticketList.findIndex(e=>e.id===t.id);this.ticketList.splice(i,1)})}onEditTicket(t){this.editTicketSend.emit(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(h))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-todo-list"]],inputs:{ticketList:"ticketList",usersList:"usersList"},outputs:{editTicketSend:"editTicketSend"},decls:5,vars:2,consts:[[1,"container-todo-list"],[1,"row"],[4,"ngIf","ngIfElse"],["ticketsShow",""],[1,"alert","alert-info"],[1,"col-lg-12"],["class","col-lg-3",4,"ngFor","ngForOf"],[1,"col-lg-3"],[3,"ticket","user","deleteTicketSend","editTicketSend"]],template:function(t,e){if(1&t&&(r.Pb(0,"div",0),r.Pb(1,"div",1),r.yc(2,C,1,0,void 0,2),r.yc(3,M,3,2,"ng-template",null,3,r.zc),r.Ob(),r.Ob()),2&t){const t=r.oc(4);r.zb(2),r.hc("ngIf",0==e.ticketList.length)("ngIfElse",t)}},directives:[s.s,s.r,I],styles:[".container-todo-list[_ngcontent-%COMP%]   app-ticket[_ngcontent-%COMP%]{margin:5px}"]}),t})();function j(t,e){1&t&&(r.Pb(0,"div",3),r.Pb(1,"h1"),r.Ac(2," veuillez patienter, la liste est en cours de chargement.."),r.Ob(),r.Ob())}function U(t,e){if(1&t){const t=r.Qb();r.Pb(0,"app-todo-form",4),r.Wb("sendTicket",function(e){return r.pc(t),r.ac().addTicket(e)})("sendEditedTicket",function(e){return r.pc(t),r.ac().onEdit(e)}),r.Ob(),r.Pb(1,"app-todo-list",5),r.Wb("editTicketSend",function(e){return r.pc(t),r.ac().editTicket(e)}),r.Ob()}if(2&t){const t=r.ac();r.hc("usersList",t.usersListMock)("editTicket",t.ticketToEdit),r.zb(1),r.hc("usersList",t.usersListMock)("ticketList",t.ticketListMock)}}const x=[{path:"",component:(()=>{class t{constructor(t){this.todoRestServ=t,this.ticketListMock=[],this.usersListMock=[]}ngOnInit(){this.loadUsersList(),this.loadTicketsList()}loadTicketsList(){this.isLoading=!0,this.todoRestServ.getListTodo().subscribe(t=>{this.ticketListMock=t,setTimeout(()=>this.isLoading=!1,800)})}loadUsersList(){this.isLoading=!0,this.todoRestServ.getListUsers().subscribe(t=>{this.usersListMock=t,setTimeout(()=>this.isLoading=!1,800)})}addTicket(t){this.ticketListMock=[t,...this.ticketListMock]}editTicket(t){this.ticketToEdit=t}onEdit(t){const e=this.ticketListMock.findIndex(e=>e.id===t.id);this.ticketListMock[e]=t}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(h))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-todo"]],decls:4,vars:2,consts:[[1,"container","container-todo"],["class","row py-5 my-5",4,"ngIf","ngIfElse"],["list",""],[1,"row","py-5","my-5"],[3,"usersList","editTicket","sendTicket","sendEditedTicket"],[3,"usersList","ticketList","editTicketSend"]],template:function(t,e){if(1&t&&(r.Pb(0,"div",0),r.yc(1,j,3,0,"div",1),r.yc(2,U,2,4,"ng-template",null,2,r.zc),r.Ob()),2&t){const t=r.oc(3);r.zb(1),r.hc("ngIf",e.isLoading)("ngIfElse",t)}},directives:[s.s,L,z],styles:[""]}),t})()}];let F=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},imports:[[o.f.forChild(x)],o.f]}),t})(),q=(()=>{class t{}return t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({factory:function(e){return new(e||t)},providers:[h],imports:[[s.c,c.a,n.i,d.b,n.s,F]]}),t})()}}]);